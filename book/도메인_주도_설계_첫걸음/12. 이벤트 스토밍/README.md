# 이벤트 스토밍이란?
이벤트스토밍은 사람들이 모여 비즈니스 프로세스에 관해 브레인 스토밍하고 신속하게 모델링하기 위한 로우 테크 활동이다.
어떤 의미에서 이벤트스토밍은 비즈니스 도메인 지식을 공유하기 위한 전술적 도구이다.

이벤트스토밍에는 범주 즉 참가자가 다룰 비즈니스 프로세스가 있다.
참가자는 포스트잇을 활용하여 일련의 도메인 이벤트를 시간의 흐름에 따라 표현한다.
모델의 모든 구성요소가 비즈니스 프로세스의 작동 방식을 설명할 때까지 단계별로 액터 커맨드 외부 시스템 등의 개념을 모델에 추가하여 개선한다.

# 누가 이벤트 스토밍에 참석하나
워크숍에는 다양한 그룹의 사람이 참가하는 것이 제일 좋다.
해결하고자 하는 비즈니스 도메인에 관련된 누구나 참석할 수 있다.
다양한 배경을 가진 사람이 많이 참여할수록 더 많은 지식이 발견된다.

다만 참가자의 규모가 너무 크지 않도록 한다.
참가자가 10명 이상이 되면 모든 참가자가 과정에 기여하는 것이 어려워진다.

# 이벤트스토밍 과정
이벤트스토밍 워크숍은 일반적으로 10단계로 진행된다.
간 단계와 정보와 개념을 모델에 추가하여 모델을 풍성하게 한다.

## 1단계: 자유로운 탐색
이벤트스토밍은 탐색하려는 비즈니스 도메인에 관련된 도메인 이벤트를 브레인 스토밍하는 것으로 시작한다.
도메인 이벤트는 이미 발생한 일을 설명하므로 과거형으로 작성하는 것이 중요하다.

이 단계에서 모든 참가자는 포스트잇에 무엇이든 떠오르는 도메인 이벤트를 적어서 모델링 공간에 붙인다.

초기 단계에는 이벤트의 순서나 중복에 대해 걱정할 필요가 없다.
이 단계에는 비즈니스 도메인에서 발생할 수 있는 것들을 브레인스토밍 한다.

새로운 이벤트를 추가하는 속도가 현저히 느려질 때까지 계속해서 도메인 이벤트를 생성한다.

## 2단계: 타임라인
참가자는 생성된 도메인 이벤트를 읽어보고 그것을 비즈니스 도메인에서 발생하는 순서대로 정리한다.

성공적인 비즈니스 시나리오를 설명하는 흐름인 '정상 시나리오'부터 시작한다.
'정상 시나리오'가 끝나면 다른 시나리오를 추가한다.
예를 들어 에러가 발생하는 경로나 다른 비즈니스 의사결정을 내린 경우가 그렇다.
분기 흐름은 앞의 이벤트에서 두 개의 흐름 또는 화살표로 표현한다.
또한 잘못된 이벤트를 수정하고 중복을 제거하며 물론 필요할 경우 빠뜨린 이벤트도 추가한다.

## 3단계 : 고충점
시간 순서대로 이벤트를 구성했으면 전체 구성을 보고 프로세스에서 주목할 만한 포인트를 식별한다.
예를 들어, 병목구간, 자동화가 필요한 수작업 단계, 문서가 사라졌거나 도메인 지식이 없는 경우다.

이벤트스토밍 세션 과정에서 이런 포인트로 쉽게 돌아오거나 나중에 다룰 수 있도록 이와 같은 비효과적인 것들을 명확하게 표시하는 것이 중요하다.

이 단계에서만 고충점을 추적하는건 아니다.
진행자는 이벤트스토밍 전 과정에서 참가자의 코멘트에 주목하거나 이슈나 관심사가 나오면 고충점으로 기록한다.

## 4단계: 중요 이벤트
고충점을 기록했으면 컨텍스트나 국면이 바뀌는 것을 나타내는 중대한 비즈니스 이벤트를 찾는다.
이를 중요 이벤트라고 하며 이 이벤트 전후로 세로로 선을 긋는다.

예를 들어 '쇼핑 카트가 초기화됐다.', '주문이 생성됐다.', '주문이 발송됐다.' 는 주문 과정에서 발생하는 중요한 상황 변화를 나타낸다.

## 5단계: 커맨드
도메인 이벤트가 이미 발생한 것을 설명하는 반면, 커맨드는 무엇이 이벤트 또는 이벤트의 흐름을 시작하게 하는지를 설명한다.
커맨드는 시스템의 오퍼레이션을 설명하고 도메인 이벤트와는 반대로 명령형으로 작성한다.

커맨드는 커밴드가 생성하는 이벤트 앞에 붙인다.
특정 역할을 담당하는 액터가 특정 커맨드를 실행하면 그 액터 정보를 작은 노란색 포스트잇에 적어서 붙인다.
액터는 고객, 관리자, 편집자처럼 비즈니스 도메인 내의 사용자 페르소나를 나타낸다.

당연히 모든 커맨드가 액터와 연관되는 것은 아니다.
그러므로 분명한 곳에만 액터 정보를 추가한다.

## 6단계: 정책
대부분의 경우 커맨드에는 관련된 액터가 없다.
이 단계에서는 커맨드를 실행할 수도 있는 자동화 정책을 찾는다.

자동화 정책은 이벤트가 커맨드의 실행을 시작하는 시나리오다.
다시 말하면 커맨드는 특정 도메인 이벤트가 발생할 때 자동으로 실행된다.

정책 포스정책은 모델링 공간에 표현해서 이벤트와 커맨드를 연결한다.

어떤 의사결정 조건이 만족할 때만 문제의 커맨드를 시작해야 한다면 그 의사결정 조건을 정책 포스트잇에 명시한다.
예를 들어 '불만이 접수됐다' 이벤트 이후에 '상부보고' 커맨드를 시작해야 하지만 VIP 고객으로부터 접수된 불만인 경우에 한정된다면 'VIP 고객에 한함' 이라는 조건을 정책 포스트잇에 명시한다.
모델링 공간에서 이벤트와 커맨드가 멀리 떨어져 있다면 화살표를 그려 연결할 수 있다.

## 7단계: 읽기 모델
읽기 모델은 도메인에서 액터가 커맨드를 실행하는 의사결정을 내릴 때 사용하는 시각적 데이터다.
이것은 시스템의 스크린, 리포트, 알림 등이 될 수 있다.

읽기 모델은 녹색 포스트잇에 액터의 의사결정을 돕는데 필요한 정보의 원천에 대해 짧게 설명한다.
액터가 이 읽기 모델을 본 후에 코맨드를 실행하므로 모델링 공간에서 커맨드 앞에 읽기 모델을 둔다.

## 8단계: 외부 시스템
이 단계에서는 외부 시스템 연동 정보를 보강한다.
탐색 중인 도메인에 포함되지 않는 모든 시스템이 외부 시스템에 해당된다.
외부 시스템이 커맨드를 실행할 수도 있고 반대로 알림을 이벤트로 만들어 외부 시스템으로 전달할 수도 있다.

이 단계가 끝나면 모든 커맨드는 액터 또는 정책에 의해서 실행되거나 외부 시스템이 호출하여 실행된다.

## 9단계: 애그리게이트
일단 모든 이벤트와 커맨드가 표현되면 참가자는 애그리게이트 개념을 포함하여 모델을 구성할 수 있다.
애그리게이트는 커맨드를 받고 이벤트를 생성한다.

애그리게이트는 왼쪽에 커맨드를 두고 오른쪽에 이벤트를 둔다.

## 10단계: 바운디드 컨텍스트
이벤트 스토밍 세션의 마지막 단계에서는 서로 연관된 애그리게이트를 찾는다.
애그리게이트는 기능이 밀접하게 연관되거나 정책을 통해 연관될 수 있다.
애그리게이트 그룹은 바운디드 컨텍스트 경계의 자연스러운 후보가 된다.
